{% extends "base.html" %}
{% block content %}
  <section class="page-header">
    <h2>文件下载中心</h2>
    <p class="hint">最新上传的文件会排在前面，点击名称即可下载。</p>
    {% if user %}
    <p><a href="/files/manage">前往文件管理</a></p>
    {% endif %}
  </section>

  <section class="card">
    <div class="table-scroll">
      <table class="data-table">
        <thead>
          <tr>
            <th>文件名</th>
            <th>上传时间</th>
            {% if user %}<th>上传者</th>{% endif %}
            <th>大小</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
          <tr>
            <td><a href="{{ file.download }}" target="_blank">{{ file.name }}</a></td>
            <td>{{ file.created.strftime('%Y-%m-%d %H:%M') }}</td>
            {% if user %}<td>{{ file.owner or '匿名令牌' }}</td>{% endif %}
            <td>{{ '%.2f MB' % (file.size / 1024 / 1024) if file.size else '-' }}</td>
          </tr>
          {% else %}
          <tr><td colspan="{{ 4 if user else 3 }}" style="text-align:center;">暂时没有可下载的文件。</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
{% endblock %}
